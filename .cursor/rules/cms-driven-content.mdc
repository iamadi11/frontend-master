---
description: "CMS is the canonical store for content; code renders + validates."
alwaysApply: false
globs:
  - "payload.config.*"
  - "src/lib/**"
  - "src/app/**"
  - "scripts/**"
---

# CMS-DRIVEN CONTENT (Hard)

## Canonical storage
All learning content must live in Payload CMS:
- Theory (rich text + animation blocks config)
- Practice demo config (controls, steps, tasks, solutions)
- References (credibility only)

## Thin routes
Next routes must be thin:
- fetch via server-only lib layer
- render components
- handle missing/invalid CMS content with explicit empty states
Never silently render blank.

## Secrets
- never expose secrets to client
- all secrets via env (no NEXT_PUBLIC for secrets)
