---
description: "Practice demo must be learn-by-doing; 2D required; 3D optional; aligned to PDF + theory."
alwaysApply: false
globs:
  - "src/components/demo/**"
  - "src/components/three/**"
  - "src/app/**/topics/**"
---

# PRACTICE DEMO CONTRACT (Learn-by-Doing)

## CMS-driven (mandatory)
Practice demo behavior/content must come from CMS config.
Hardcoding lesson text in route files is forbidden.

## Validation (mandatory)
- Validate config using Zod
- If invalid/missing: show friendly fallback, never crash

## Must include (all)
- Controls
- Visualization
- Event Log (explains what happened and why)
- Guided Steps
- Tasks + Solution Reveal + Explanation

## 2D baseline (mandatory)
Every topic must have a working 2D demo.

## 3D mode (optional but strict if present)
- must improve clarity vs 2D
- user-triggered only (no idle loops)
- reduced-motion safe
- WebGL fallback to 2D automatically
- must match Theory 2D/3D Mental Model + Event Log narrative
